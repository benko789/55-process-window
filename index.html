<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(drawChart);

      // function drawChart() {
      //   var data = google.visualization.arrayToDataTable([
      //     ['X', 'Y'],
      //     [1, 10],
      //     [2, 20],
      //     [3, 30],
      //     [4, 40]
      //   ]);

      //   var options = {
      //     title: 'Scatter Plot',
      //     hAxis: {title: 'X'},
      //     vAxis: {title: 'Y'},
      //     legend: 'none',
      //     tooltip: {isHtml: true}
      //   };

      //   var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));
      //   chart.draw(data, options);
      // }
      function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('number', 'X');
        data.addColumn('number', 'Y');
        data.addColumn({type:'string', role:'tooltip'});
        // load data from csv
        var dataFromFile = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1lMLE16M-kFAhp__Rfu4mrpepBGUUiC_CQ0lNlvp6aK0/edit#gid=2035041721');

        dataFromFile.send(handleQueryResponse)
        // dataFromFile.send(function(response) {
        //   data.addRows(response.getData());

        //   var options = {
        //     title: 'Scatter Plot with Tooltips',
        //     hAxis: {title: 'X'},
        //     vAxis: {title: 'Y'},
        //     tooltip: {isHtml: true}
        //   };

        //   var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));
        //   chart.draw(data, options);
        // });

      //   var dataTable = new google.visualization.DataTable();

      //   dataTable.addColumn('string', 'Country');
      //   // Use custom HTML content for the domain tooltip.
      //   dataTable.addColumn({'type': 'string', 'role': 'tooltip', 'p': {'html': true}});
      //   dataTable.addColumn('number', 'Gold');
      //   dataTable.addColumn('number', 'Silver');
      //   dataTable.addColumn('number', 'Bronze');

      //   dataTable.addRows([
      //     ['USA', createCustomHTMLContent('https://upload.wikimedia.org/wikipedia/en/a/a4/Flag_of_the_United_States.svg', 46, 29, 29), 46, 29, 29],
      //     ['China', createCustomHTMLContent('https://upload.wikimedia.org/wikipedia/commons/f/fa/Flag_of_the_People%27s_Republic_of_China.svg', 38, 27, 23), 38, 27, 23],
      //     ['UK', createCustomHTMLContent('https://upload.wikimedia.org/wikipedia/commons/a/ae/Flag_of_the_United_Kingdom.svg', 29, 17, 19), 29, 17, 19]
      //   ]);

      //   var options = {
      //     title: 'London Olympics Medals',
      //     colors: ['#FFD700', '#C0C0C0', '#8C7853'],
      //     // This line makes the entire category's tooltip active.
      //     focusTarget: 'category',
      //     // Use an HTML tooltip.
      //     tooltip: { isHtml: true }
      //   };

      // // Create and draw the visualization. need to ensure the getElementById has the correct name of the div
      // new google.visualization.ColumnChart(document.getElementById('chart_div')).draw(dataTable, options);
      }

      function handleQueryResponse(response) {

        if (response.isError()) {
          alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }

        var options = {
          title: 'Test Plot',
          colors: ['#FFD700', '#C0C0C0', '#8C7853'],
          // This line makes the entire category's tooltip active.
          focusTarget: 'category',
          // Use an HTML tooltip.
          tooltip: { isHtml: true }
        };

        var data = response.getDataTable();
        var chart = new google.visualization.ScatterChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }

      function createCustomHTMLContent(flagURL, totalGold, totalSilver, totalBronze) {
        return '<div style="padding:5px 5px 5px 5px;">' +
            '<img src="' + flagURL + '" style="width:75px;height:50px"><br/>' +
            '<table class="medals_layout">' + '<tr>' +
            '<td><img src="https://upload.wikimedia.org/wikipedia/commons/1/15/Gold_medal.svg" style="width:25px;height:25px"/></td>' +
            '<td><b>' + totalGold + '</b></td>' + '</tr>' + '<tr>' +
            '<td><img src="https://upload.wikimedia.org/wikipedia/commons/0/03/Silver_medal.svg" style="width:25px;height:25px"/></td>' +
            '<td><b>' + totalSilver + '</b></td>' + '</tr>' + '<tr>' +
            '<td><img src="https://upload.wikimedia.org/wikipedia/commons/5/52/Bronze_medal.svg" style="width:25px;height:25px"/></td>' +
            '<td><b>' + totalBronze + '</b></td>' + '</tr>' + '</table>' + '</div>';
      }
    </script>
  </head>
  <body>
    <!-- here is the section that the chart is showing at -->
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html>